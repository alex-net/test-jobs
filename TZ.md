# box-and-products-test (Тестовое задание)
**Тестовое задание c коробками и товарами**

1. Форма добавления и редактирования коробки
<br>Поля формы коробки:
    * Weight, kg (число с точностью до сотых)
    * Width, cm (число с точностью до сотых)
    * Length, cm (число с точностью до сотых)
    * Height, cm (число с точностью до сотых)
    * Reference (обязательное поле)
    * Status (нельзя указать при добавлении коробки)
    <br>*Статусы коробок*: Expected, At warehouse, Prepared, Shipped
2. Карточка коробки
    * Форма добавления, редактирования и удаления товаров
    <br>Поля формы товара:
        - Title (обязательное поле)
        - SKU (обязательное поле, уникальное значение)
        - Shipped Qty (обязательное поле, целое число)
        - Received Qty (целое число) с кнопкой Match (чтобы установить то же количество, что было в Shipped Qty)
        - Price (число с точностью до сотых)
    * Общее количество товаров в коробке
    * Форма смены статуса коробки с валидацией (можно менять только на Prepared и Shipped, сменить статус можно только если добавлены товары)
3. Список (таблица) коробок
    * Форма с checkbox (для выбора коробок) Колонки:
        - ID коробки
        - Date (дата и время создания)
        - Weight (форма редактирования веса)
        - Status (форма смены статуса с валидацией: можно менять только на Expected и At warehouse, чтобы сменить статус на At warehouse, нужно заполнить Weight и нужно чтобы Shipped qty и Received qty во всех товарах совпадали)
        - Actions (кнопки: карточка товара, редактирование и удаление)
    * Фильтры для списка
        - Date from
        - Date to
        - Search (поиск по id и reference коробки, title и SKU товара)
        - Status
    * Сортировка по ID, Date, Weight и Status
    * Форма для смены статуса сразу у нескольких выбранных коробок с валидацией
    * Кнопка Report для экспорта текущего списка коробок в excel (колонки ID, Date, Weight, Status)
    * Пометка коробок (цветом или иконкой), у которых Shipped qty и Received qty товаров не совпадают
4. События
    * Подсчет объема коробки если ее статус еще не Prepared и сохранение его в базе
    * Подсчет общей суммы товаров в коробке и сохранение ее в базе
    * Проверка коробки, есть ли в ней товары, у которых Shipped qty и Received qty не совпадают, и сохранение результата проверки в базе
5. Использовать **yii2**, миграции, mysql, bootstrap для вывода форм и таблиц
6. Нужно использовать что-то из DDD (примерное описание https://elisdn.ru/blog/105/services-and-controllers)
    * Использовать DTO для пользовательских данных с правилами валидации (модели yii)
    * В качестве сущностей и репозиториев (получение и сохранение в базу) можно использовать модели yii c activerecord
    * Нужен удобный диспетчер событий, в основе которого можно использовать события yii
    * Использовать сервисы для работы с DTO и сущностями (чтобы не засорять контроллер)
    * Зависимости нужно внедрять извне (например, DTO и сервисы в контроллер)

---

## Доступы

Логигн: __admin__
<br>Парль: __admin__